
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up feedback covers in ESPHome.">
<meta itemprop="name" content="Feedback Cover">
<meta itemprop="description" content="Instructions for setting up feedback covers in ESPHome.">
<meta name="twitter:title" content="Feedback Cover">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up feedback covers in ESPHome.">
<meta property="og:title" content="Feedback Cover">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up feedback covers in ESPHome.">

    <title>Feedback Cover &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../../_static/pygments_dark.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphome.io/components/cover/feedback.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Template Cover" href="template.html" />
    <link rel="prev" title="Endstop Cover" href="endstop.html" />
  <link rel="stylesheet" href="../../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="/_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="manifest" href="/_static/site.webmanifest">
  <link rel="mask-icon" href="/_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Feedback Cover</a><ul>
<li><a class="reference internal" href="#use-cases">Use Cases</a><ul>
<li><a class="reference internal" href="#time-based">Time-Based</a></li>
<li><a class="reference internal" href="#endstop-sensors">Endstop Sensors</a></li>
<li><a class="reference internal" href="#movement-sensors">Movement Sensors</a></li>
</ul>
</li>
<li><a class="reference internal" href="#safety-features">Safety Features</a></li>
<li><a class="reference internal" href="#configuration-variables">Configuration variables</a></li>
<li><a class="reference internal" href="#example-configurations">Example Configurations</a><ul>
<li><a class="reference internal" href="#migrating-current-based-cover">Migrating Current-Based Cover</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="../index.html">Components</a> ➔</li>
      <li><a href="index.html">Cover Component</a> ➔</li>
      <li>Feedback Cover</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="feedback-cover">
<h1>Feedback Cover<a class="headerlink" href="#feedback-cover" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">feedback</span></code> cover platform allows you to create covers with position control that
can optionally have feedback from sensors to detect the fully-open and fully-closed states (endstops),
and from sensors to detect actual movement (opening/closing). In all the cases the current
position is approximated with the time the cover has been moving in a direction.</p>
<p>It supports <em>open</em>, <em>close</em>, <em>stop</em> and <em>toggle</em> actions. Tilt control is not supported.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../../_images/more-info-ui.png"><img alt="../../_images/more-info-ui.png" src="../../_images/more-info-ui.png" style="width: 50.0%;" /></a>
</figure>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">cover</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feedback</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Gate&quot;</span>

<span class="w">    </span><span class="nt">open_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_cover_switch</span>
<span class="w">    </span><span class="nt">open_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2.1min</span>
<span class="w">    </span><span class="nt">open_endstop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_endstop_binary_sensor</span>
<span class="w">    </span><span class="nt">open_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_movement_binary_sensor</span>

<span class="w">    </span><span class="nt">close_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">close_cover_switch</span>
<span class="w">    </span><span class="nt">close_duration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2min</span>
<span class="w">    </span><span class="nt">close_endstop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">close_endstop_binary_sensor</span>
<span class="w">    </span><span class="nt">close_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">close_movement_binary_sensor</span>

<span class="w">    </span><span class="nt">stop_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_off</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_cover_switch</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_off</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">close_cover_switch</span>
</pre></div>
</div>
<section id="use-cases">
<h2>Use Cases<a class="headerlink" href="#use-cases" title="Permalink to this heading">¶</a></h2>
<p>It is a versatile cover that can accommodate for a number of DIY setups, or monitoring an externally controlled cover:</p>
<section id="time-based">
<h3>Time-Based<a class="headerlink" href="#time-based" title="Permalink to this heading">¶</a></h3>
<p>Simplest case, when no sensors are available. The state is thus assumed.</p>
<p>It is a drop-in replacement of <a class="reference internal" href="time_based.html"><span class="doc">Time Based Cover</span></a></p>
</section>
<section id="endstop-sensors">
<h3>Endstop Sensors<a class="headerlink" href="#endstop-sensors" title="Permalink to this heading">¶</a></h3>
<p>For cases where there are endstops at one or both ends of the cover to detect the fully-open and fully-closed states.
When any of these endstops are reached, an actual state is read and updated and the cover optionally
stopped (via <code class="docutils literal notranslate"><span class="pre">stop_action</span></code>). The state is not assumed.</p>
<p>The extension also handles the case where the cover has builtin endstops, which stops the movement, independently to
the component’s logic. In this case, when the cover is fully closed (either if timed based or sensor based) the
<code class="docutils literal notranslate"><span class="pre">stop_action</span></code> is not triggered.</p>
<p>It is a drop-in replacement of <a class="reference internal" href="endstop.html"><span class="doc">Endstop Cover</span></a>.</p>
</section>
<section id="movement-sensors">
<h3>Movement Sensors<a class="headerlink" href="#movement-sensors" title="Permalink to this heading">¶</a></h3>
<p>If movement feedback is available, the cover no longer operates in <em>optimistic mode</em> (assuming that movement starts
as soon as an action is triggered) and can also react to commands issued to cover from an external control and still
keep states in sync (useful for “smartization” of an existing cover).</p>
<p>When there are no specific endstop sensors, and if the cover has builtin endstops and no external control logic,
these movement sensors can optionally be use to infer the endstop state.
When the movement stops (with no stop action being requested) it is assumed that it was caused by
the builtin endstops, and so the close/open state (according to current direction) was reached.
This function is activated setting <code class="docutils literal notranslate"><span class="pre">infer_endstop</span></code> to True.</p>
<p>It can be used to replace a <a class="reference internal" href="current_based.html"><span class="doc">Current Based Cover</span></a>, with some modifications in the yaml. See <a class="reference internal" href="#migrating-current-based"><span class="std std-ref">Migrating Current-Based Cover</span></a></p>
</section>
</section>
<section id="safety-features">
<h2>Safety Features<a class="headerlink" href="#safety-features" title="Permalink to this heading">¶</a></h2>
<p>To protect the cover hardware from damage, some safety options are available:</p>
<ul class="simple">
<li><p><em>Max duration</em>, to protect from faulty endstops</p></li>
<li><p><em>Direction change wait time</em>, like an interlock wait time, to protect motors from sudden direction changes</p></li>
<li><p><em>Obstacle sensors</em> and <em>rollback</em>, possibility to stop and optionally rollback the cover when some external sensors detects an obstacle
(it might be a sensor for high current consumption or an infrared light detecting an obstruction in the path).</p></li>
</ul>
</section>
<section id="configuration-variables">
<h2>Configuration variables<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the cover.</p></li>
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
<li><p><strong>stop_action</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a>): The action that should
be performed when the remote requests the cover to be closed or an endstop is reached.</p></li>
</ul>
<p>Open options:</p>
<ul class="simple">
<li><p><strong>open_action</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a>): The action that should
be performed when the remote requests the cover to be opened.</p></li>
<li><p><strong>open_duration</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The amount of time it takes the cover
to open up from the fully-closed state.</p></li>
<li><p><strong>open_endstop</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when the open position is reached.</p></li>
<li><p><strong>open_sensor</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when the cover is moving in the open direction.</p></li>
<li><p><strong>open_obstacle_sensor</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when an obstacle that blocks the
open direction is detected.</p></li>
</ul>
<p>Close options:</p>
<ul class="simple">
<li><p><strong>close_action</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a>): The action that should
be performed when the remote requests the cover to be closed.</p></li>
<li><p><strong>close_duration</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The amount of time it takes the cover
to close from the fully-open state.</p></li>
<li><p><strong>close_endstop</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when the closed position is reached.</p></li>
<li><p><strong>close_sensor</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when the cover is moving in the close direction.</p></li>
<li><p><strong>close_obstacle_sensor</strong> (<strong>Optional</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the
<a class="reference internal" href="../binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> that turns on when an obstacle that blocks the
close direction is detected.</p></li>
</ul>
<p>Additional options:</p>
<ul class="simple">
<li><p><strong>has_built_in_endstop</strong> (<em>Optional</em>, boolean): Indicates that the cover has built in end stop
detectors. In this configuration the <code class="docutils literal notranslate"><span class="pre">stop_action</span></code> is not performed when the open or close
time is completed and if the cover is commanded to open or close the corresponding actions
will be performed without checking current state. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>infer_endstop_from_movement</strong> (<em>Optional</em>, boolean): Whether to infer endstop state from the movement sensor.
Requires movement sensors to be set, no endstop sensors and to have builtin endstops. Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>assumed_state</strong> (<em>Optional</em>, boolean): Whether the true state of the cover is not known.
This will make the Home Assistant frontend show buttons for both OPEN and CLOSE actions, instead
of hiding or disabling one of them. Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code> if no sensor is available to known
the actual state of the cover.</p></li>
<li><p><strong>max_duration</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The maximum duration the cover should be opening
or closing. Useful for protecting from dysfunctional endstops.
Requires internal, builtin or inferred endstops.</p></li>
<li><p><strong>direction_change_wait_time</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): Stops cover and forces a wait time between changes in direction,
and takes it into account when computing cover position (useful to protect motors).
When this option is set (even at 0s) if an open/close action is invoked while the cover is moving in the opposite direction,
then and intermediate stop action will be invoked to generate the delay.</p></li>
<li><p><strong>acceleration_wait_time</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): Considers a wait time needed by the cover to actually
start moving after command is issued and takes it into account when computing cover position
(useful for heavy covers with large inertia).
Intended to not accumulate error when doing multiple partial open/close actions).
The open/close duration includes one instance of this delay, as it is the total amount of time from
issuing a command to reaching endstop.
Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></li>
<li><p><strong>update_interval</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The interval
to publish updated position information to the UI while the cover is moving.
Defaults to <code class="docutils literal notranslate"><span class="pre">1s</span></code>.</p></li>
<li><p><strong>obstacle_rollback</strong> (<em>Optional</em>, percentage): The percentage of rollback the cover will perform in case of
obstacle detection while moving. Defaults to <code class="docutils literal notranslate"><span class="pre">10%</span></code>.</p></li>
<li><p>All other options from <a class="reference internal" href="index.html#config-cover"><span class="std std-ref">Cover</span></a>.</p></li>
</ul>
</section>
<section id="example-configurations">
<h2>Example Configurations<a class="headerlink" href="#example-configurations" title="Permalink to this heading">¶</a></h2>
<section id="migrating-current-based-cover">
<span id="migrating-current-based"></span><h3>Migrating Current-Based Cover<a class="headerlink" href="#migrating-current-based-cover" title="Permalink to this heading">¶</a></h3>
<p>Most options can be left untouched, but some modifications are needed:</p>
<ol class="arabic">
<li><p>All current sensing related options must be moved to auxiliary <a class="reference internal" href="../binary_sensor/analog_threshold.html"><span class="doc">Analog Threshold Binary Sensor</span></a>,
to convert current readings to binary sensors, using the corresponding thresholds and delays.</p>
<p>If there where any open/close obstacle current threshold defined, a separate binary sensor with that threshold should be defined.
The option <code class="docutils literal notranslate"><span class="pre">start_sensing_delay</span></code> should be directly replaced by a <code class="docutils literal notranslate"><span class="pre">delayed_off</span></code> filter in the movement sensors, or alternatively
hysteresis options could be used to reduce the noise.</p>
</li>
<li><p>To have the very same behavior implicit in current based cover, you must always set <code class="docutils literal notranslate"><span class="pre">has_built_in_endstop</span></code> and <code class="docutils literal notranslate"><span class="pre">infer_endstop_from_movement</span></code>
to True.</p></li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example original sensor configuration</span>
<span class="nt">cover</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current_based</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Current</span><span class="nv"> </span><span class="s">Based</span><span class="nv"> </span><span class="s">Cover&quot;</span>

<span class="w">    </span><span class="nt">open_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_current_sensor</span>
<span class="w">    </span><span class="nt">open_moving_current_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">open_obstacle_current_threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span>
<span class="w">    </span><span class="nt">start_sensing_delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8s</span>
<span class="w">    </span><span class="c1"># ...rest of options</span>

<span class="c1"># Example converted sensor configuration</span>
<span class="nt">binary_sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analog_threshold</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_binary_sensor</span>
<span class="w">    </span><span class="nt">sensor_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_current_sensor</span>
<span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">filters</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">delayed_off</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8s</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">analog_threshold</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_obstacle_binary_sensor</span>
<span class="w">    </span><span class="nt">sensor_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_current_sensor</span>
<span class="w">    </span><span class="nt">threshold</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.8</span>
<span class="w">  </span><span class="c1"># ... repeat for close sensors</span>

<span class="nt">cover</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feedback</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Feedback</span><span class="nv"> </span><span class="s">Based</span><span class="nv"> </span><span class="s">Cover&quot;</span>
<span class="w">    </span><span class="nt">has_built_in_endstop</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">infer_endstop_from_movement</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="w">    </span><span class="nt">open_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_binary_sensor</span>
<span class="w">    </span><span class="nt">open_obstacle_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_obstacle_binary_sensor</span>
<span class="w">    </span><span class="c1">#... rest of options</span>
</pre></div>
</div>
</div></blockquote>
<ol class="arabic" start="3">
<li><p>Malfunction detection is not directly supported by Feedback Cover, as the malfunction was very narrowly defined to a specific use case
(while in other hardware configurations, the same situation is perfectly valid).</p>
<p>The malfunction alerted specifically when there was current in the opposite direction of the requested operation (possibly due to a relay welded).
This detection can still be achieved by putting the logic directly in the switch, (or whatever needed according to your specific use case).</p>
</li>
</ol>
<blockquote>
<div><div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example original malfunction configuration</span>
<span class="nt">cover</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">current_based</span>
<span class="w">    </span><span class="nt">close_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">close_current</span>
<span class="w">    </span><span class="nt">close_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_relay</span>
<span class="w">    </span><span class="nt">open_sensor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_current</span>
<span class="w">    </span><span class="nt">open_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">switch.turn_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_relay</span>

<span class="w">    </span><span class="nt">malfunction_detection</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">malfunction_action</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">logger.log</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Malfunction</span><span class="nv"> </span><span class="s">detected.</span><span class="nv"> </span><span class="s">Relay</span><span class="nv"> </span><span class="s">welded.&quot;</span>
<span class="w">    </span><span class="c1">#... rest of options</span>

<span class="c1"># Example converted malfunction configuration</span>
<span class="nt">switch</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">gpio</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_relay</span>
<span class="w">    </span><span class="c1">#... rest of options</span>
<span class="w">    </span><span class="nt">on_turn_off</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">delay</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">200ms</span><span class="w"> </span><span class="c1">#allow for switching time and any discharge</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">if</span><span class="p">:</span>
<span class="w">          </span><span class="nt">condition</span><span class="p">:</span>
<span class="w">            </span><span class="nt">binary_sensor.is_on</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">open_binary_sensor</span>
<span class="w">            </span><span class="c1"># alternative can check directly</span>
<span class="w">            </span><span class="c1"># on sensor.in_range open_current</span>
<span class="w">          </span><span class="nt">then</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">logger.log</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Malfunction</span><span class="nv"> </span><span class="s">detected.</span><span class="nv"> </span><span class="s">Relay</span><span class="nv"> </span><span class="s">welded.&quot;</span>
</pre></div>
</div>
</div></blockquote>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Cover Component</span></a></p></li>
<li><p><a class="reference internal" href="../../guides/automations.html#automation"><span class="std std-ref">Automations and Templates</span></a></p></li>
<li><p><a class="reference external" href="/api/feedback__cover_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/cover/feedback.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="/changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("/changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>