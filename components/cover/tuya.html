
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up a Tuya cover motor.">
<meta itemprop="name" content="Tuya Cover">
<meta itemprop="description" content="Instructions for setting up a Tuya cover motor.">
<meta name="twitter:title" content="Tuya Cover">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up a Tuya cover motor.">
<meta property="og:title" content="Tuya Cover">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up a Tuya cover motor.">

    <title>Tuya Cover &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../../_static/pygments_dark.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphome.io/components/cover/tuya.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Fan Component" href="../fan/index.html" />
    <link rel="prev" title="Time Based Cover" href="time_based.html" />
  <link rel="stylesheet" href="../../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="/_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="manifest" href="/_static/site.webmanifest">
  <link rel="mask-icon" href="/_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Tuya Cover</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#supported-devices">Supported devices</a></li>
<li><a class="reference internal" href="#restore-modes">Restore modes</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="../index.html">Components</a> âž”</li>
      <li><a href="index.html">Cover Component</a> âž”</li>
      <li>Tuya Cover</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="tuya-cover">
<h1>Tuya Cover<a class="headerlink" href="#tuya-cover" title="Permalink to this heading">Â¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">tuya</span></code> cover platform creates a simple position-only cover from a
tuya serial component.</p>
<p>This requires the <a class="reference internal" href="../tuya.html"><span class="doc">Tuya MCU</span></a> component to be set up before you can use this platform.</p>
<p>Here is an example output for a Tuya M515EGWT (motor for chain roller blinds):</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>[21:50:28][C][tuya:024]: Tuya:
[21:50:28][C][tuya:031]:   Datapoint 2: int value (value: 53)
[21:50:28][C][tuya:029]:   Datapoint 5: switch (value: OFF)
</pre></div>
</div>
<p>On this cover motor, the position control is datapoint 2.
Now you can create the cover.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a cover using the datapoint from above</span>
<span class="nt">cover</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tuya&quot;</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;motor1&quot;</span>
<span class="w">    </span><span class="nt">position_datapoint</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">Â¶</a></h2>
<ul class="simple">
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the cover.</p></li>
<li><p><strong>control_datapoint</strong> (<em>Optional</em>, int): The datapoint id number for sending control commands.</p></li>
<li><p><strong>position_datapoint</strong> (<strong>Required</strong>, int): The datapoint id number of the cover position value.</p></li>
<li><p><strong>position_report_datapoint</strong> (<em>Optional</em>, int): The datapoint id number of the cover position report value, if separate from position_datapoint.</p></li>
<li><p><strong>direction_datapoint</strong> (<em>Optional</em>, int): The datapoint id number for setting the direction of travel.</p></li>
<li><p><strong>min_value</strong> (<em>Optional</em>, int): The lowest position value, meaning cover closed. Defaults to 0.</p></li>
<li><p><strong>max_value</strong> (<em>Optional</em>, int): the highest position value, meaning cover opened. Defaults to 255.</p></li>
<li><p><strong>invert_position</strong> (<em>Optional</em>, boolean): Sets the direction of travel to be inverted, if direction_datapoint is configured.</p></li>
<li><p>All other options from <a class="reference internal" href="index.html#config-cover"><span class="std std-ref">Cover</span></a>.</p></li>
</ul>
</section>
<section id="supported-devices">
<h2>Supported devices<a class="headerlink" href="#supported-devices" title="Permalink to this heading">Â¶</a></h2>
<p>Tuya cover devices known to be supported by this integration:</p>
<ul class="simple">
<li><p>Tuya <code class="docutils literal notranslate"><span class="pre">M515EGWT</span></code> (motor for bead chain roller blinds)</p>
<ul>
<li><p>Only the <code class="docutils literal notranslate"><span class="pre">position</span></code> datapoint (2) is used for this device.</p></li>
<li><p>Datapoint 5â€™s function is not currently known.</p></li>
</ul>
</li>
<li><p>Zemismart <code class="docutils literal notranslate"><span class="pre">ZM79E-DT</span></code> and <code class="docutils literal notranslate"><span class="pre">YH002</span></code> (curtain motor)</p>
<ul>
<li><p>Supported datapoints: <code class="docutils literal notranslate"><span class="pre">control</span></code> (1), <code class="docutils literal notranslate"><span class="pre">position</span></code> (2), <code class="docutils literal notranslate"><span class="pre">position_report</span></code> (3) and <code class="docutils literal notranslate"><span class="pre">direction</span></code> (5).</p></li>
<li><p>The direction of travel is persisted to the Tuya MCU, so doesnâ€™t need to be set if youâ€™ve already configured it via the remote control.</p></li>
</ul>
</li>
</ul>
<p>If you have a Tuya cover device that isnâ€™t listed above, it may still work - but youâ€™ll need to determine which datapoints it uses
(and what their IDs are) for yourself.</p>
</section>
<section id="restore-modes">
<h2>Restore modes<a class="headerlink" href="#restore-modes" title="Permalink to this heading">Â¶</a></h2>
<p>The default restore mode (<code class="docutils literal notranslate"><span class="pre">RESTORE</span></code>) attempts to restore the state on startup, but doesnâ€™t instruct the cover to move to that state.</p>
<p><code class="docutils literal notranslate"><span class="pre">RESTORE_AND_CALL</span></code> additionally instructs the cover to move to the restored state - which might not work, depending on your device (see note below).</p>
<p>The Tuya MCU usually reports its position on startup, so <code class="docutils literal notranslate"><span class="pre">NO_RESTORE</span></code> will likely also appear to restore its state - but may take slightly longer.</p>
<p>Note that if your Tuya cover device uses relative position sensing (such as the ZM79E-DT), it canâ€™t tell if the cover was moved while not powered up.
This means that moving the cover while the device is powered off will result in its position not matching the reported/requested state.
In this condition, it will go into an error / uncalibrated state when it next tries to go in one direction (as it canâ€™t move as far as it wants to), requiring an open/close cycle to recalibrate.</p>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">Â¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="../tuya.html"><span class="doc">Tuya MCU</span></a></p></li>
<li><p><a class="reference internal" href="index.html"><span class="doc">Cover Component</span></a></p></li>
<li><p><a class="reference external" href="/api/tuya__cover_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/cover/tuya.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 ðŸŽ‰
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="/changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("/changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>