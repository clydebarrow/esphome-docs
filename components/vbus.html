
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for integrating a solar energy collector controller using VBus protocol in ESPHome.">
<meta name="keywords" content="VBUS RESOL SOLAR">
<meta itemprop="name" content="VBus Component">
<meta itemprop="description" content="Instructions for integrating a solar energy collector controller using VBus protocol in ESPHome.">
<meta itemprop="image" content="https://esphome.io/_images/resol_deltasol_bs_plus.jpg">
<meta name="twitter:title" content="VBus Component">
<meta name="twitter:image:src" content="https://esphome.io/_images/resol_deltasol_bs_plus.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for integrating a solar energy collector controller using VBus protocol in ESPHome.">
<meta property="og:title" content="VBus Component">
<meta property="og:image" content="https://esphome.io/_images/resol_deltasol_bs_plus.jpg">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for integrating a solar energy collector controller using VBus protocol in ESPHome.">

    <title>VBus Component &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphome.io/components/vbus.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Voice Assistant" href="voice_assistant.html" />
    <link rel="prev" title="UART Bus" href="uart.html" />
  <link rel="stylesheet" href="../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="/_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="manifest" href="/_static/site.webmanifest">
  <link rel="mask-icon" href="/_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">VBus Component</a><ul>
<li><a class="reference internal" href="#supported-models">Supported Models</a></li>
<li><a class="reference internal" href="#hardware-connection">Hardware Connection</a></li>
<li><a class="reference internal" href="#component">Component</a></li>
<li><a class="reference internal" href="#sensor">Sensor</a></li>
<li><a class="reference internal" href="#binary-sensor">Binary Sensor</a></li>
<li><a class="reference internal" href="#custom-vbus-sensors"><code class="docutils literal notranslate"><span class="pre">Custom</span></code> VBus sensors</a></li>
<li><a class="reference internal" href="#custom-vbus-binary-sensors"><code class="docutils literal notranslate"><span class="pre">custom</span></code> VBus binary sensors</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="index.html">Components</a> ➔</li>
      <li>VBus Component</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="vbus-component">
<h1>VBus Component<a class="headerlink" href="#vbus-component" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">VBus</span></code> Component provides status reading connectivity to solar heat energy collector controllers using VBus
protocol. These devices are mainly produced by Resol, often also found under different brand names like Viessmann,
Kioto, Wagner etc. The component currently supports natively the models in the table below
but any device can be added via lambda by knowing <a class="reference external" href="https://danielwippermann.github.io/resol-vbus">its packet structure</a>.</p>
<figure class="align-center">
<img alt="../_images/resol_deltasol_bs_plus.jpg" src="../_images/resol_deltasol_bs_plus.jpg" />
</figure>
<section id="supported-models">
<h2>Supported Models<a class="headerlink" href="#supported-models" title="Permalink to this heading">¶</a></h2>
<p>The following table shows the currently supported models of Vbus devices.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-text">Supported Models</span><a class="headerlink" href="#id1" title="Permalink to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Config Value</p></th>
<th class="head"><p>Hex Address</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DeltaSol BS Plus</p></td>
<td><p>deltasol_bs_plus</p></td>
<td><p>4221</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DeltaSol BS 2009</p></td>
<td><p>deltasol_bs_2009</p></td>
<td><p>427B</p></td>
<td><p>DeltaSol BS Plus V2</p></td>
</tr>
<tr class="row-even"><td><p>Dux H3214</p></td>
<td><p>deltasol_bs_2009</p></td>
<td><p>427B</p></td>
<td><p>Pump 2 unsupported</p></td>
</tr>
<tr class="row-odd"><td><p>DeltaSol C</p></td>
<td><p>deltasol_c</p></td>
<td><p>4212</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>DeltaSol CS2</p></td>
<td><p>deltasol_cs2</p></td>
<td><p>1121</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>DeltaSol CS2 Plus</p></td>
<td><p>deltasol_cs2_plus</p></td>
<td><p>2211</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>The <code class="docutils literal notranslate"><span class="pre">Config</span> <span class="pre">Value</span></code> should be used for the <code class="docutils literal notranslate"><span class="pre">model</span></code> parameter in your <code class="docutils literal notranslate"><span class="pre">sensor</span></code> and <code class="docutils literal notranslate"><span class="pre">binary_sensor</span></code> entries.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Hex</span> <span class="pre">Address</span></code> field is the value sent by a device in the <code class="docutils literal notranslate"><span class="pre">from</span></code> field of a message. To identify an unknown
model, set the logger level to <code class="docutils literal notranslate"><span class="pre">VERBOSE</span></code> and look for lines like this in the log output:</p>
<p><code class="docutils literal notranslate"><span class="pre">[10:53:48][V][vbus:068]:</span> <span class="pre">P1</span> <span class="pre">C0500</span> <span class="pre">427b-&gt;0000:</span> <span class="pre">0000</span> <span class="pre">0000</span> <span class="pre">(0)</span></code></p>
<p>The value before the <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> symbol is the device source address. If it matches one of the entries in the table above
then that model should work with your unit.</p>
</section>
<section id="hardware-connection">
<h2>Hardware Connection<a class="headerlink" href="#hardware-connection" title="Permalink to this heading">¶</a></h2>
<p>The device must be connected via a <a class="reference internal" href="uart.html"><span class="doc">UART bus</span></a> supporting the receiving line only. The UART bus
must be configured at the same speed of the module which is by default 9600bps. The controller outputs data every second.</p>
<p>To connect to this and read data from the bus a level shifting is needed as the voltage is around 8V (direct connection
would damage the MCU). For our read-only purposes it’s
sufficient to adapt the level appropriately to 3.3V using a circuit like below:</p>
<figure class="align-center">
<img alt="../_images/resol_vbus_adapter_schematic.png" src="../_images/resol_vbus_adapter_schematic.png" />
</figure>
<p>An electrically isolated version using an opto-coupler:</p>
<figure class="align-center">
<img alt="../_images/vbus_serial_optocoupler.png" src="../_images/vbus_serial_optocoupler.png" />
</figure>
<p>Another approach, with PCB design ready to be manufactured <a class="reference external" href="https://github.com/FatBeard/vbus-arduino-library/tree/master/pcb">can be found here</a>.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not connect the GND pin of your module with the ground of Resol unit as that may damage the output port of it.
The output of the device is symmetric, meaning that the signal is not referenced to the ground, but rather it’s a
differential signal between the two wires. However, the MCU references the signal against the ground, so the two
grounds are not supposed to be connected to each other as can be seen in the circuit depicted above.</p>
</div>
</section>
<section id="component">
<h2>Component<a class="headerlink" href="#component" title="Permalink to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">uart</span><span class="p">:</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">resol</span>
<span class="w">  </span><span class="nt">rx_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">GPIO3</span>
<span class="w">  </span><span class="nt">baud_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9600</span>

<span class="nt">vbus</span><span class="p">:</span>
<span class="w">  </span><span class="nt">uart_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">resol</span>

<span class="nt">logger</span><span class="p">:</span>
<span class="w">  </span><span class="nt">baud_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w"> </span><span class="c1"># disable uart logger on ESP8266</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If you are using the <a class="reference internal" href="logger.html"><span class="doc">Logger Component</span></a> make sure you are not using the same pins for it or otherwise disable the UART
logging with the <code class="docutils literal notranslate"><span class="pre">baud_rate:</span> <span class="pre">0</span></code> option.</p>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>uart_id</strong> (<em>Optional</em>, <a class="reference internal" href="../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID of the UART hub used to connect to the device.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Functionality of the sensors depends on the type of the device and the scheme arrangement of the hydraulic
system it controls. The actual arrangement number set up can be determined from the settings of the device. Please
check the user manual and assess your arrangement to determine the functionality of each sensor and name them
accordingly.</p>
</div>
</section>
<section id="sensor">
<h2>Sensor<a class="headerlink" href="#sensor" title="Permalink to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vbus</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deltasol_bs_plus</span>
<span class="w">    </span><span class="nt">temperature_1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temperature 1</span>
<span class="w">    </span><span class="nt">temperature_2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temperature 2</span>
<span class="w">    </span><span class="nt">temperature_3</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temperature 3</span>
<span class="w">    </span><span class="nt">temperature_4</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temperature 4</span>
<span class="w">    </span><span class="nt">pump_speed_1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pump Speed 1</span>
<span class="w">    </span><span class="nt">pump_speed_2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Pump Speed 2</span>
<span class="w">    </span><span class="nt">operating_hours_1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Operating Hours 1</span>
<span class="w">    </span><span class="nt">operating_hours_2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Operating Hours 2</span>
<span class="w">    </span><span class="nt">heat_quantity</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Heat Quantity</span>
<span class="w">    </span><span class="nt">time</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Device Time</span>
<span class="w">    </span><span class="nt">version</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Device firmware version</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>model</strong> (<strong>Required</strong>): Specify the model of the connected controller. Choose one of the config values listed in the table of supported models above.</p></li>
</ul>
<p>Supported sensors:</p>
<ul class="simple">
<li><p>for <strong>deltasol_bs_plus</strong> and <strong>deltasol_bs_2009</strong>: <code class="docutils literal notranslate"><span class="pre">temperature_1</span></code>,  <code class="docutils literal notranslate"><span class="pre">temperature_2</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_3</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_4</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_1</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_2</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_1</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_2</span></code>, <code class="docutils literal notranslate"><span class="pre">heat_quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>.</p></li>
<li><p>for <strong>deltasol_c</strong>: <code class="docutils literal notranslate"><span class="pre">temperature_1</span></code>,  <code class="docutils literal notranslate"><span class="pre">temperature_2</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_3</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_4</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_1</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_2</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_1</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_2</span></code>, <code class="docutils literal notranslate"><span class="pre">heat_quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>.</p></li>
<li><p>for <strong>deltasol_cs2</strong>: <code class="docutils literal notranslate"><span class="pre">temperature_1</span></code>,  <code class="docutils literal notranslate"><span class="pre">temperature_2</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_3</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_4</span></code>,  <code class="docutils literal notranslate"><span class="pre">pump_speed</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours</span></code>, <code class="docutils literal notranslate"><span class="pre">heat_quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>.</p></li>
<li><p>for <strong>deltasol_cs_plus</strong>: <code class="docutils literal notranslate"><span class="pre">temperature_1</span></code>,  <code class="docutils literal notranslate"><span class="pre">temperature_2</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_3</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_4</span></code>, <code class="docutils literal notranslate"><span class="pre">temperature_5</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_1</span></code>, <code class="docutils literal notranslate"><span class="pre">pump_speed_2</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_1</span></code>, <code class="docutils literal notranslate"><span class="pre">operating_hours_2</span></code>, <code class="docutils literal notranslate"><span class="pre">heat_quantity</span></code>, <code class="docutils literal notranslate"><span class="pre">time</span></code>, <code class="docutils literal notranslate"><span class="pre">version</span></code>, <code class="docutils literal notranslate"><span class="pre">flow_rate</span></code>.</p></li>
</ul>
<p>All sensors are <em>Optional</em> and support all other options from <a class="reference internal" href="sensor/index.html#config-sensor"><span class="std std-ref">Sensor</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Sensors are updated every time a data packet is sent by the device. Some models send data very often, possibly every second. If you are
concerned about the load on the receiving database, you can add a <code class="docutils literal notranslate"><span class="pre">throttle</span></code> filter to the sensors.</p>
</div>
</section>
<section id="binary-sensor">
<h2>Binary Sensor<a class="headerlink" href="#binary-sensor" title="Permalink to this heading">¶</a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">binary_sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vbus</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">deltasol_bs_plus</span>
<span class="w">    </span><span class="nt">relay1</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Relay 1 On</span>
<span class="w">    </span><span class="nt">relay2</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Relay 2 On</span>
<span class="w">    </span><span class="nt">sensor1_error</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sensor 1 Fault</span>
<span class="w">    </span><span class="nt">sensor2_error</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sensor 2 Fault</span>
<span class="w">    </span><span class="nt">sensor3_error</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sensor 3 Fault</span>
<span class="w">    </span><span class="nt">sensor4_error</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sensor 4 Fault</span>
<span class="w">    </span><span class="nt">collector_max</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Collector Max</span>
<span class="w">    </span><span class="nt">collector_min</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Collector Min</span>
<span class="w">    </span><span class="nt">collector_frost</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Collector Frost</span>
<span class="w">    </span><span class="nt">tube_collector</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Tube Collector</span>
<span class="w">    </span><span class="nt">recooling</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Recooling</span>
<span class="w">    </span><span class="nt">hqm</span><span class="p">:</span>
<span class="w">      </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Option Heat Quantity Measurement</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>model</strong> (<strong>Required</strong>): Specify the model of the connected controller. Choose one of the config values listed in the table of supported models above.</p></li>
</ul>
<p>Supported sensors:</p>
<ul class="simple">
<li><p>for <strong>deltasol_bs_plus</strong>: <code class="docutils literal notranslate"><span class="pre">relay1</span></code>,  <code class="docutils literal notranslate"><span class="pre">relay2</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor1_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor2_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor3_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor4_error</span></code>, <code class="docutils literal notranslate"><span class="pre">collector_max</span></code>, <code class="docutils literal notranslate"><span class="pre">collector_min</span></code>, <code class="docutils literal notranslate"><span class="pre">collector_frost</span></code>, <code class="docutils literal notranslate"><span class="pre">tube_collector</span></code>, <code class="docutils literal notranslate"><span class="pre">recooling</span></code>, <code class="docutils literal notranslate"><span class="pre">hqm</span></code>.</p></li>
<li><p>for <strong>deltasol_bs_2009</strong>: <code class="docutils literal notranslate"><span class="pre">sensor1_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor2_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor3_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor4_error</span></code>, <code class="docutils literal notranslate"><span class="pre">frost_protection_active</span></code>.</p></li>
<li><p>for <strong>deltasol_c</strong>: <code class="docutils literal notranslate"><span class="pre">sensor1_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor2_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor3_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor4_error</span></code>.</p></li>
<li><p>for <strong>deltasol_cs2</strong>: <code class="docutils literal notranslate"><span class="pre">sensor1_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor2_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor3_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor4_error</span></code>.</p></li>
<li><p>for <strong>deltasol_cs_plus</strong>: <code class="docutils literal notranslate"><span class="pre">sensor1_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor2_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor3_error</span></code>, <code class="docutils literal notranslate"><span class="pre">sensor4_error</span></code>.</p></li>
</ul>
<p>All binary sensors are <em>Optional</em> and support all other options from <a class="reference internal" href="binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a>.</p>
</section>
<section id="custom-vbus-sensors">
<h2><code class="docutils literal notranslate"><span class="pre">Custom</span></code> VBus sensors<a class="headerlink" href="#custom-vbus-sensors" title="Permalink to this heading">¶</a></h2>
<p>Devices on a VBus are identified with a source address. There can be multiple devices on the same bus,
each device type has a different address.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vbus</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x10</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x1234</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x100</span>
<span class="w">    </span><span class="nt">sensors</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">temp1</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temp 1</span>
<span class="w">        </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">return ((x[1] &lt;&lt; 8) + x[0]) / 10.0;</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>model</strong> (<strong>Required</strong>): Set to <code class="docutils literal notranslate"><span class="pre">custom</span></code>.</p></li>
<li><p><strong>dest</strong> (<strong>Required</strong>): The <code class="docutils literal notranslate"><span class="pre">DFA</span></code> value corresponding to your device (see below).</p></li>
<li><p><strong>source</strong> (<strong>Required</strong>): The address corresponding to <code class="docutils literal notranslate"><span class="pre">your</span> <span class="pre">device</span> <span class="pre">model</span></code> (see below).</p></li>
<li><p><strong>command</strong> (<strong>Required</strong>): The <code class="docutils literal notranslate"><span class="pre">command</span></code> corresponding to your device (see below).</p></li>
<li><p><strong>sensors</strong> (<strong>Required</strong>): A list of <a class="reference internal" href="sensor/index.html#config-sensor"><span class="std std-ref">Sensor</span></a> definitions that include a <code class="docutils literal notranslate"><span class="pre">lambda</span></code> to do the decoding and return a <code class="docutils literal notranslate"><span class="pre">float</span></code> value.</p></li>
<li><p><strong>lambda</strong> (<strong>Required</strong>, <a class="reference internal" href="../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>): Code to parse a value from the incoming data packets and return it.
The data packet is in a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint8_t&gt;</span></code> called <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
</ul>
</section>
<section id="custom-vbus-binary-sensors">
<h2><code class="docutils literal notranslate"><span class="pre">custom</span></code> VBus binary sensors<a class="headerlink" href="#custom-vbus-binary-sensors" title="Permalink to this heading">¶</a></h2>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>model</strong> (<strong>Required</strong>): Set to <code class="docutils literal notranslate"><span class="pre">custom</span></code>.</p></li>
<li><p><strong>dest</strong> (<strong>Required</strong>): The <code class="docutils literal notranslate"><span class="pre">DFA</span></code> value corresponding to your device (see below).</p></li>
<li><p><strong>source</strong> (<strong>Required</strong>): The address corresponding to <code class="docutils literal notranslate"><span class="pre">your</span> <span class="pre">device</span> <span class="pre">model</span></code> (see below).</p></li>
<li><p><strong>command</strong> (<strong>Required</strong>): The <code class="docutils literal notranslate"><span class="pre">command</span></code> corresponding to your device (see below).</p></li>
<li><p><strong>binary_sensors</strong> (<strong>Required</strong>): A list of <a class="reference internal" href="binary_sensor/index.html#config-binary-sensor"><span class="std std-ref">Binary Sensor</span></a> definitions that include a <code class="docutils literal notranslate"><span class="pre">lambda</span></code> to do the decoding and return a <code class="docutils literal notranslate"><span class="pre">bool</span></code> value.</p></li>
<li><p><strong>lambda</strong> (<strong>Required</strong>, <a class="reference internal" href="../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>): Code to parse a value from the incoming data packets and return it.
The data packet is in a <code class="docutils literal notranslate"><span class="pre">std::vector&lt;uint8_t&gt;</span></code> called <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p></li>
</ul>
<p>To determine the correct values for the parameters above, visit <a class="reference external" href="http://danielwippermann.github.io/resol-vbus/#/vsf">packet definitions list</a>. In the search field of the <strong>Packets</strong> table, enter the name of your device.</p>
<p>To extract the values with a <a class="reference internal" href="../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>, look in the packet structure by clicking the <strong>Bytes</strong> link in the table. Each value is placed at an <code class="docutils literal notranslate"><span class="pre">offset</span></code> within the packet.
For <code class="docutils literal notranslate"><span class="pre">float</span></code> values, let’s look at the temperature example: the value is stored as a <code class="docutils literal notranslate"><span class="pre">16</span></code>-bit value in <code class="docutils literal notranslate"><span class="pre">2</span></code> bytes little-endian format. Since it’s always the second byte containing the upper byte, it needs to be shifted by <code class="docutils literal notranslate"><span class="pre">8</span></code> bits (multiplied by <code class="docutils literal notranslate"><span class="pre">256</span></code>) (e.g. <code class="docutils literal notranslate"><span class="pre">0x34,</span> <span class="pre">0x12</span> <span class="pre">-&gt;</span> <span class="pre">0x1234</span></code>). The result needs to be multiplied by the factor, which is <code class="docutils literal notranslate"><span class="pre">0.1</span></code>, to obtain the correct values: <code class="docutils literal notranslate"><span class="pre">((x[1]</span> <span class="pre">&lt;&lt;</span> <span class="pre">8)</span> <span class="pre">+</span> <span class="pre">x[0])</span> <span class="pre">*</span> <span class="pre">0.1f)</span></code>. The number within the square brackets is the <code class="docutils literal notranslate"><span class="pre">[offset]</span></code>.
For <code class="docutils literal notranslate"><span class="pre">binary</span></code> values, multiple binary values are stored within a single numeric value encoded with a bitmask. To extract the binary value all you have to do is to apply <em>bitwise AND</em> operator <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> between the value at the corresponding offset and the <code class="docutils literal notranslate"><span class="pre">mask</span></code> shown in the table.</p>
<p>For example to decode some sensors of <cite>DeltaSol BS Plus</cite> via lambdas:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vbus</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x10</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x4221</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x100</span>
<span class="w">    </span><span class="nt">sensors</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">scheme</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Arrangement scheme</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mdi:pipe-wrench</span>
<span class="w">        </span><span class="nt">accuracy_decimals</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">        </span><span class="nt">entity_category</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">diagnostic</span>
<span class="w">        </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">return x[14];  // Configured arrangement scheme</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">temp2</span>
<span class="w">        </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Temperature DHW</span>
<span class="w">        </span><span class="nt">state_class</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">measurement</span>
<span class="w">        </span><span class="nt">unit_of_measurement</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;°C&quot;</span>
<span class="w">        </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">return ((x[3] &lt;&lt; 8) + x[2]) * 0.1f;  // Temperature 2</span>

<span class="nt">binary_sensor</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">vbus</span>
<span class="w">    </span><span class="nt">model</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">custom</span>
<span class="w">    </span><span class="nt">dest</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x10</span>
<span class="w">    </span><span class="nt">source</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x4221</span>
<span class="w">    </span><span class="nt">command</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0x100</span>
<span class="w">    </span><span class="nt">binary_sensors</span><span class="p">:</span>
<span class="w">      </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Heat Quantity Measurement On</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bin_hqm</span>
<span class="w">        </span><span class="nt">icon</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mdi:counter</span>
<span class="w">        </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">return x[15] &amp; 0x20; // Option Heat Quantity Measurement enabled</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="uart.html"><span class="doc">UART Bus</span></a></p></li>
<li><p><a class="reference internal" href="binary_sensor/index.html"><span class="doc">Binary Sensor Component</span></a></p></li>
<li><p><a class="reference internal" href="sensor/index.html"><span class="doc">Sensor Component</span></a></p></li>
<li><p><a class="reference external" href="https://www.resol.de/en/dokumente">Resol manuals</a></p></li>
<li><p><a class="reference external" href="https://danielwippermann.github.io/resol-vbus">VBus protocol</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/vbus.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="/changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("/changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>