
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up stepper motor drivers in ESPHome">
<meta name="keywords" content="stepper motor, stepper driver, a4988">
<meta itemprop="name" content="Stepper Component">
<meta itemprop="description" content="Instructions for setting up stepper motor drivers in ESPHome">
<meta itemprop="image" content="https://esphome.io/_images/folder-open.png">
<meta name="twitter:title" content="Stepper Component">
<meta name="twitter:image:src" content="https://esphome.io/_images/folder-open.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up stepper motor drivers in ESPHome">
<meta property="og:title" content="Stepper Component">
<meta property="og:image" content="https://esphome.io/_images/folder-open.png">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up stepper motor drivers in ESPHome">

    <title>Stepper Component &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../../_static/pygments_dark.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphome.io/components/stepper/index.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Touchscreen Components" href="../touchscreen/index.html" />
    <link rel="prev" title="WL-134 Pet Tag Sensor" href="../text_sensor/wl_134.html" />
  <link rel="stylesheet" href="../../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="/_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="manifest" href="/_static/site.webmanifest">
  <link rel="mask-icon" href="/_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Stepper Component</a><ul>
<li><a class="reference internal" href="#base-stepper-configuration">Base Stepper Configuration</a></li>
<li><a class="reference internal" href="#a4988-component">A4988 Component</a></li>
<li><a class="reference internal" href="#uln2003-component">ULN2003 Component</a></li>
<li><a class="reference internal" href="#stepper-set-target-action"><code class="docutils literal notranslate"><span class="pre">stepper.set_target</span></code> Action</a></li>
<li><a class="reference internal" href="#stepper-report-position-action"><code class="docutils literal notranslate"><span class="pre">stepper.report_position</span></code> Action</a></li>
<li><a class="reference internal" href="#stepper-set-speed-action"><code class="docutils literal notranslate"><span class="pre">stepper.set_speed</span></code> Action</a></li>
<li><a class="reference internal" href="#stepper-set-acceleration-action"><code class="docutils literal notranslate"><span class="pre">stepper.set_acceleration</span></code> Action</a></li>
<li><a class="reference internal" href="#stepper-set-deceleration-action"><code class="docutils literal notranslate"><span class="pre">stepper.set_deceleration</span></code> Action</a></li>
<li><a class="reference internal" href="#home-assistant-configuration">Home Assistant Configuration</a></li>
<li><a class="reference internal" href="#lambda-calls">lambda calls</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="../index.html">Components</a> ‚ûî</li>
      <li>Stepper Component</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="stepper-component">
<h1>Stepper Component<a class="headerlink" href="#stepper-component" title="Permalink to this heading">¬∂</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">stepper</span></code> component allows you to use stepper motors with ESPHome.
Currently only the A4988 stepper driver
(<a class="reference external" href="https://www.pololu.com/file/0J450/a4988_DMOS_microstepping_driver_with_translator.pdf">datasheet</a>)
and ULN2003 (<a class="reference external" href="http://www.ti.com/lit/ds/symlink/uln2003a.pdf">datasheet</a>) are supported.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This component will not show up in the Home Assistant front-end automatically because
Home Assistant doesn‚Äôt have support for steppers. Please see <a class="reference internal" href="#stepper-ha-config"><span class="std std-ref">Home Assistant Configuration</span></a>.</p>
</div>
<section id="base-stepper-configuration">
<span id="base-stepper-config"></span><h2>Base Stepper Configuration<a class="headerlink" href="#base-stepper-configuration" title="Permalink to this heading">¬∂</a></h2>
<p>All stepper configuration schemas inherit these options.</p>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>max_speed</strong> (<strong>Required</strong>, float): The maximum speed in <code class="docutils literal notranslate"><span class="pre">steps/s</span></code> (steps per seconds) to drive the
stepper at. Note most steppers can‚Äôt step properly with speeds higher than 250 steps/s.</p></li>
<li><p><strong>acceleration</strong> (<em>Optional</em>, float): The acceleration in <code class="docutils literal notranslate"><span class="pre">steps/s^2</span></code> (steps per seconds squared)
to use when starting to move. The default is <code class="docutils literal notranslate"><span class="pre">inf</span></code> which means infinite acceleration, so the
stepper will try to drive with the full speed immediately. This value is helpful if that first motion of
the motor is too jerky for what it‚Äôs moving.  If you make this a small number, it will take the motor a
moment to get up  to speed.</p></li>
<li><p><strong>deceleration</strong> (<em>Optional</em>, float): The same as <code class="docutils literal notranslate"><span class="pre">acceleration</span></code>, but for when the motor is decelerating
shortly before reaching the set position. Defaults to <code class="docutils literal notranslate"><span class="pre">inf</span></code> (immediate deceleration).</p></li>
</ul>
</section>
<section id="a4988-component">
<h2>A4988 Component<a class="headerlink" href="#a4988-component" title="Permalink to this heading">¬∂</a></h2>
<p>Put this code into the configuration file on ESPHome for this device.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">stepper</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a4988</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">    </span><span class="nt">step_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D0</span>
<span class="w">    </span><span class="nt">dir_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D1</span>
<span class="w">    </span><span class="nt">max_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250 steps/s</span>

<span class="w">    </span><span class="c1"># Optional:</span>
<span class="w">    </span><span class="nt">sleep_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D2</span>
<span class="w">    </span><span class="nt">acceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inf</span>
<span class="w">    </span><span class="nt">deceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inf</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Specify the ID of the stepper so that you can control it.</p></li>
<li><p><strong>step_pin</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The <code class="docutils literal notranslate"><span class="pre">STEP</span></code> pin of the A4988
stepper driver.</p></li>
<li><p><strong>dir_pin</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The <code class="docutils literal notranslate"><span class="pre">DIRECTION</span></code> pin of the A4988
stepper driver.</p></li>
<li><p><strong>sleep_pin</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): Optionally also use the <code class="docutils literal notranslate"><span class="pre">SLEEP</span></code> pin
of the A4988 stepper driver. If specified, the driver will be put into sleep mode as soon as the stepper
reaches the target steps.</p></li>
<li><p>All other from <a class="reference internal" href="#base-stepper-config"><span class="std std-ref">Base Stepper Configuration</span></a>.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the stepper is driving in the wrong direction, you can invert the <code class="docutils literal notranslate"><span class="pre">dir_pin</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">stepper</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">a4988</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">dir_pin</span><span class="p">:</span>
<span class="w">      </span><span class="nt">number</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D1</span>
<span class="w">      </span><span class="nt">inverted</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
</div>
</section>
<section id="uln2003-component">
<h2>ULN2003 Component<a class="headerlink" href="#uln2003-component" title="Permalink to this heading">¬∂</a></h2>
<p>Put this code into the configuration file on ESPHome for this device.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">stepper</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">uln2003</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">    </span><span class="nt">pin_a</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D0</span>
<span class="w">    </span><span class="nt">pin_b</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D1</span>
<span class="w">    </span><span class="nt">pin_c</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D2</span>
<span class="w">    </span><span class="nt">pin_d</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D3</span>
<span class="w">    </span><span class="nt">max_speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250 steps/s</span>

<span class="w">    </span><span class="c1"># Optional:</span>
<span class="w">    </span><span class="nt">acceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inf</span>
<span class="w">    </span><span class="nt">deceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">inf</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul>
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Specify the ID of the stepper so that you can control it.</p></li>
<li><p><strong>pin_a</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The pin <strong>a</strong> of the stepper control board.</p></li>
<li><p><strong>pin_b</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The pin <strong>b</strong> of the stepper control board.</p></li>
<li><p><strong>pin_c</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The pin <strong>c</strong> of the stepper control board.</p></li>
<li><p><strong>pin_d</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-pin-schema"><span class="std std-ref">Pin Schema</span></a>): The pin <strong>d</strong> of the stepper control board.</p></li>
<li><p><strong>sleep_when_done</strong> (<em>Optional</em>, boolean): Whether to turn off all coils when the stepper has
reached the target position</p></li>
<li><p><strong>step_mode</strong> (<em>Optional</em>, string): The step mode to operate the motor with. One of:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">FULL_STEP</span></code> (Default)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">HALF_STEP</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">WAVE_DRIVE</span></code></p></li>
</ul>
</div></blockquote>
</li>
<li><p>All other from <a class="reference internal" href="#base-stepper-config"><span class="std std-ref">Base Stepper Configuration</span></a>.</p></li>
</ul>
</section>
<section id="stepper-set-target-action">
<span id="id1"></span><h2><code class="docutils literal notranslate"><span class="pre">stepper.set_target</span></code> Action<a class="headerlink" href="#stepper-set-target-action" title="Permalink to this heading">¬∂</a></h2>
<p>To use your stepper motor in <a class="reference internal" href="../../guides/automations.html#automation"><span class="std std-ref">automations</span></a> or templates, you can use this action to set the target
position (in steps). The stepper will always run towards the target position and stop once it has reached the target.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="nt">then</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>

<span class="w">  </span><span class="c1"># Templated</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="kt">!lambda</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">        </span><span class="no">if (id(my_binary_sensor).state) {</span>
<span class="w">          </span><span class="no">return 1000;</span>
<span class="w">        </span><span class="no">} else {</span>
<span class="w">          </span><span class="no">return -1000;</span>
<span class="w">        </span><span class="no">}</span>
</pre></div>
</div>
<p>Configuration options:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the stepper.</p></li>
<li><p><strong>target</strong> (<strong>Required</strong>, int, <a class="reference internal" href="../../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>): The target position in steps.</p></li>
</ul>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This turns the stepper to an absolute position! To have the servo move <em>relative</em> to the current
position, first reset the current position and then set the target to the relative value.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="nt">then</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Move 150 steps forward</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.report_position</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">        </span><span class="nt">position</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_target</span><span class="p">:</span>
<span class="w">        </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">        </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">150</span>
</pre></div>
</div>
</div>
</section>
<section id="stepper-report-position-action">
<span id="id2"></span><h2><code class="docutils literal notranslate"><span class="pre">stepper.report_position</span></code> Action<a class="headerlink" href="#stepper-report-position-action" title="Permalink to this heading">¬∂</a></h2>
<p>All steppers start out with a target and current position of <code class="docutils literal notranslate"><span class="pre">0</span></code> on boot. However, if you for example want to home
a stepper motor, it can be useful to <strong>report</strong> the stepper where it is currently at.</p>
<p>With this action, you can set the stepper‚Äôs internal position counter to a specific value (in steps). Please note
that reporting the position can create unexpected moves of the stepper. For example, if the stepper‚Äôs target and
current position is at 1000 steps and you ‚Äúreport‚Äù a position of 0, the stepper will move 1000 steps forward to match
the target again.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="nt">then</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.report_position</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">position</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>
<span class="w">  </span><span class="c1"># It&#39;s best to call set_target directly after report_position, so that the stepper doesn&#39;t move</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_target</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250</span>

<span class="w">  </span><span class="c1"># Templated</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.report_position</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">position</span><span class="p">:</span><span class="w"> </span><span class="kt">!lambda</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">        </span><span class="no">if (id(my_binary_sensor).state) {</span>
<span class="w">          </span><span class="no">return 0;</span>
<span class="w">        </span><span class="no">} else {</span>
<span class="w">          </span><span class="no">return -1000;</span>
<span class="w">        </span><span class="no">}</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the stepper.</p></li>
<li><p><strong>position</strong> (<strong>Required</strong>, int, <a class="reference internal" href="../../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>): The position to report in steps.</p></li>
</ul>
</section>
<section id="stepper-set-speed-action">
<span id="id3"></span><h2><code class="docutils literal notranslate"><span class="pre">stepper.set_speed</span></code> Action<a class="headerlink" href="#stepper-set-speed-action" title="Permalink to this heading">¬∂</a></h2>
<p>This <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a> allows you to set the speed of a stepper at runtime.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_speed</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">speed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250 steps/s</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the stepper.</p></li>
<li><p><strong>speed</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>, float): The speed
in <code class="docutils literal notranslate"><span class="pre">steps/s</span></code> (steps per seconds) to drive the stepper at.</p></li>
</ul>
</section>
<section id="stepper-set-acceleration-action">
<span id="id4"></span><h2><code class="docutils literal notranslate"><span class="pre">stepper.set_acceleration</span></code> Action<a class="headerlink" href="#stepper-set-acceleration-action" title="Permalink to this heading">¬∂</a></h2>
<p>This <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a> allows you to set the acceleration of a stepper at runtime.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_acceleration</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">acceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250 steps/s^2</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the stepper.</p></li>
<li><p><strong>acceleration</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>, float): The acceleration
in <code class="docutils literal notranslate"><span class="pre">steps/s^2</span></code> (steps per seconds squared) to use when starting to move.</p></li>
</ul>
</section>
<section id="stepper-set-deceleration-action">
<span id="id5"></span><h2><code class="docutils literal notranslate"><span class="pre">stepper.set_deceleration</span></code> Action<a class="headerlink" href="#stepper-set-deceleration-action" title="Permalink to this heading">¬∂</a></h2>
<p>This <a class="reference internal" href="../../guides/automations.html#config-action"><span class="std std-ref">Action</span></a> allows you to set the deceleration of a stepper at runtime.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_deceleration</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">      </span><span class="nt">deceleration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">250 steps/s^2</span>
</pre></div>
</div>
<p>Configuration variables:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the stepper.</p></li>
<li><p><strong>deceleration</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>, float): The same as <code class="docutils literal notranslate"><span class="pre">acceleration</span></code>,
but for when the motor is decelerating shortly before reaching the set position.</p></li>
</ul>
</section>
<section id="home-assistant-configuration">
<span id="stepper-ha-config"></span><h2>Home Assistant Configuration<a class="headerlink" href="#home-assistant-configuration" title="Permalink to this heading">¬∂</a></h2>
<p>The easiest way to control your stepper from Home Assistant is to add a <code class="docutils literal notranslate"><span class="pre">number</span></code> to your ESPHome
configuration. See <a class="reference internal" href="../number/index.html#config-number"><span class="std std-ref">Number</span></a> for more information.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">number</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">template</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Stepper Control</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">set_action</span><span class="p">:</span>
<span class="w">      </span><span class="nt">then</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">stepper.set_target</span><span class="p">:</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
<span class="w">            </span><span class="nt">target</span><span class="p">:</span><span class="w"> </span><span class="kt">!lambda</span><span class="w"> </span><span class="s">&#39;return</span><span class="nv"> </span><span class="s">x;&#39;</span>

<span class="nt">stepper</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="c1"># [...] stepper config</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_stepper</span>
</pre></div>
</div>
</section>
<section id="lambda-calls">
<span id="stepper-lambda-calls"></span><h2>lambda calls<a class="headerlink" href="#lambda-calls" title="Permalink to this heading">¬∂</a></h2>
<p>From <a class="reference internal" href="../../guides/automations.html#config-lambda"><span class="std std-ref">lambdas</span></a>, you can call several methods on stepper motors to do some
advanced stuff (see the full API Reference for more info).</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">set_target</span></code>: Set the target position of the motor as an integer.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Argument is integer (signed int)</span>
<span class="c1">// Set the (absolute) target position to 250 steps</span>
<span class="n">id</span><span class="p">(</span><span class="n">my_stepper</span><span class="p">).</span><span class="n">set_target</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">report_position</span></code>: Report the current position as an integer.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Report the (absolute) current position as 250 steps</span>
<span class="n">id</span><span class="p">(</span><span class="n">my_stepper</span><span class="p">).</span><span class="n">report_position</span><span class="p">(</span><span class="mi">250</span><span class="p">);</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">current_position</span></code>: Get the current position of the stepper as an integer.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">my_stepper</span><span class="p">).</span><span class="n">current_position</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">target_position</span></code>: Get the set target position of the stepper  as an integer.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">pos</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">id</span><span class="p">(</span><span class="n">my_stepper</span><span class="p">).</span><span class="n">target_position</span><span class="p">;</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¬∂</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="/api/stepper_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/stepper/index.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 üéâ
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="/changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("/changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>