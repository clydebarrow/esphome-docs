
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up servos in ESPHome">
<meta itemprop="name" content="Servo Component">
<meta itemprop="description" content="Instructions for setting up servos in ESPHome">
<meta itemprop="image" content="https://clydebarrow.github.io/esphome-docs/_images/servo.png">
<meta name="twitter:title" content="Servo Component">
<meta name="twitter:image:src" content="https://clydebarrow.github.io/esphome-docs/_images/servo.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up servos in ESPHome">
<meta property="og:title" content="Servo Component">
<meta property="og:image" content="https://clydebarrow.github.io/esphome-docs/_images/servo.png">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up servos in ESPHome">

    <title>Servo Component &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../_static/pygments_dark.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://clydebarrow.github.io/esphome-docs/components/servo.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Sim800L Component" href="sim800l.html" />
    <link rel="prev" title="Rtttl Buzzer" href="rtttl.html" />
  <link rel="stylesheet" href="../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="_static/favicon-16x16.png">
  <link rel="manifest" href="_static/site.webmanifest">
  <link rel="mask-icon" href="_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="pagefind/pagefind-ui.css" rel="stylesheet">
<script src="pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Servo Component</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#servo-write-action"><code class="docutils literal notranslate"><span class="pre">servo.write</span></code> Action</a></li>
<li><a class="reference internal" href="#servo-detach-action"><code class="docutils literal notranslate"><span class="pre">servo.detach</span></code> Action</a></li>
<li><a class="reference internal" href="#home-assistant-configuration">Home Assistant Configuration</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="index.html">Components</a> ➔</li>
      <li>Servo Component</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="servo-component">
<h1>Servo Component<a class="headerlink" href="#servo-component" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">servo</span></code> component allows you to use servo motors with ESPHome. Servos are
motor controllers that contain all the electronics necessary for driving the motor and provide
a simple PWM interface to control the motor.</p>
<p>This integration works with both continuous-rotation and absolute servos and has a similar
interface to the Arduino Servo library.</p>
<p>First, create an <a class="reference internal" href="output/index.html#output"><span class="std std-ref">output component</span></a> (here <code class="docutils literal notranslate"><span class="pre">esp8266_pwm</span></code>) for the pin the
servo is connected to. Then connect that output to the servo component by assigning an ID.
Please note the frequency of the output should be around 50Hz, as most servo controllers
only operate in this frequency range.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This component will not show up in the Home Assistant front-end automatically because
Home Assistant doesn’t have support for servos. Please see <a class="reference internal" href="#servo-ha-config"><span class="std std-ref">Home Assistant Configuration</span></a>.</p>
</div>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">servo</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
<span class="w">    </span><span class="nt">output</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pwm_output</span>

<span class="c1"># Example output platform</span>
<span class="c1"># On ESP32, use ledc output</span>
<span class="nt">output</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">esp8266_pwm</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pwm_output</span>
<span class="w">    </span><span class="nt">pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">D1</span>
<span class="w">    </span><span class="nt">frequency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50 Hz</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>output</strong> (<strong>Required</strong>, <a class="reference internal" href="../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the <a class="reference internal" href="output/index.html"><span class="doc">output component</span></a>
to use for this servo.</p></li>
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of this servo so that it can be controlled.</p></li>
</ul>
<p>Advanced Options:</p>
<ul class="simple">
<li><p><strong>min_level</strong> (<em>Optional</em>, percentage): The PWM duty cycle the minimum value (-100%) will map
to. Defaults to <code class="docutils literal notranslate"><span class="pre">3%</span></code>.</p></li>
<li><p><strong>idle_level</strong> (<em>Optional</em>, percentage): The PWM duty cycle the idle value (0%) will map
to. This is also the state of the servo at startup. Defaults to <code class="docutils literal notranslate"><span class="pre">7.5%</span></code>.</p></li>
<li><p><strong>max_level</strong> (<em>Optional</em>, percentage): The PWM duty cycle the maximum value (100%) will map
to. Defaults to <code class="docutils literal notranslate"><span class="pre">12.0%</span></code>.</p></li>
<li><p><strong>restore</strong> (<em>Optional</em>, boolean): Whether to restore the state of the servo motor at startup.
This is useful if you have an absolute servo motor and it goes back to its 0 position at startup.
Defaults to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p></li>
<li><p><strong>auto_detach_time</strong> (<em>Optional</em>, <a class="reference internal" href="../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The time after reaching the target value when the servo will be detached`, if set to zero, servo will not be detached. Defaults to <code class="docutils literal notranslate"><span class="pre">0s</span></code>.</p></li>
<li><p><strong>transition_length</strong> (<em>Optional</em>, <a class="reference internal" href="../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The time needed for a full movement (-1.0 to 1.0). This will effectively limit the speed of the servo, the larger the value, the slowest the servo will move. Defaults to `` 0s``
This can slow down the servo to avoid loud noises or just make the movement not jerking.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Some servos support a larger range for the level. For continuous rotation servos
this can speed them up a bit and for absolute servos this can extend their angle range.
You can configure the <code class="docutils literal notranslate"><span class="pre">min_level</span></code> and <code class="docutils literal notranslate"><span class="pre">max_level</span></code> options to adjust the level range
to match your servo (Experiment with these values).</p>
</div>
</section>
<section id="servo-write-action">
<span id="id1"></span><h2><code class="docutils literal notranslate"><span class="pre">servo.write</span></code> Action<a class="headerlink" href="#servo-write-action" title="Permalink to this heading">¶</a></h2>
<p>To use your servo motor in <a class="reference internal" href="../guides/automations.html#automation"><span class="std std-ref">automations</span></a> or templates, you can use this action to set the
target level of the servo from -100% to 100%.</p>
<ul class="simple">
<li><p>-100% (= -1.0) is the minimum value of the servo. For continuous-rotation servos this will
rotate the servo backward.</p></li>
<li><p>0% (= 0.0) is the idle level of the servo. For continuous-rotation servos this will
stop the servo.</p></li>
<li><p>100% (= 1.0) is the maximum value of the servo. For continuous-rotation servos this will
rotate the servo forward.</p></li>
</ul>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="nt">then</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">servo.write</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
<span class="w">      </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100.0%</span>

<span class="w">  </span><span class="c1"># Templated</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">servo.write</span><span class="p">:</span>
<span class="w">      </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
<span class="w">      </span><span class="c1"># For template values, range is [-1; 1]</span>
<span class="w">      </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="kt">!lambda</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">        </span><span class="no">if (id(my_binary_sensor).state) {</span>
<span class="w">          </span><span class="no">return 1.0;</span>
<span class="w">        </span><span class="no">} else {</span>
<span class="w">          </span><span class="no">return -1.0;</span>
<span class="w">        </span><span class="no">}</span>
</pre></div>
</div>
<p>Configuration options:</p>
<ul class="simple">
<li><p><strong>id</strong> (<strong>Required</strong>, <a class="reference internal" href="../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): The ID of the servo.</p></li>
<li><p><strong>level</strong> (<em>Optional</em>, percentage, <a class="reference internal" href="../guides/automations.html#config-templatable"><span class="std std-ref">templatable</span></a>): The target level.
Range is from -100% to 100% (-1.0 to 1.0).</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action can also be expressed as a <a class="reference internal" href="../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">id</span><span class="p">(</span><span class="n">my_servo</span><span class="p">).</span><span class="n">write</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span>
</pre></div>
</div>
</div>
</section>
<section id="servo-detach-action">
<span id="id2"></span><h2><code class="docutils literal notranslate"><span class="pre">servo.detach</span></code> Action<a class="headerlink" href="#servo-detach-action" title="Permalink to this heading">¶</a></h2>
<p>This <a class="reference internal" href="../guides/automations.html#config-action"><span class="std std-ref">Action</span></a> allows you to disable the output on a servo motor -
this will make the servo motor stop immediately and disable its active control.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">on_...</span><span class="p">:</span>
<span class="w">  </span><span class="nt">then</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">servo.detach</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This action can also be expressed as a <a class="reference internal" href="../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">id</span><span class="p">(</span><span class="n">my_servo</span><span class="p">).</span><span class="n">detach</span><span class="p">();</span>
</pre></div>
</div>
</div>
</section>
<section id="home-assistant-configuration">
<span id="servo-ha-config"></span><h2>Home Assistant Configuration<a class="headerlink" href="#home-assistant-configuration" title="Permalink to this heading">¶</a></h2>
<p>The easiest way to control your servo from Home Assistant is to add a <code class="docutils literal notranslate"><span class="pre">number</span></code> to your ESPHome
configuration. See <a class="reference internal" href="number/index.html#config-number"><span class="std std-ref">Number</span></a> for more information.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">number</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">template</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Servo Control</span>
<span class="w">    </span><span class="nt">min_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-100</span>
<span class="w">    </span><span class="nt">initial_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="w">    </span><span class="nt">max_value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">step</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<span class="w">    </span><span class="nt">optimistic</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">set_action</span><span class="p">:</span>
<span class="w">      </span><span class="nt">then</span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">servo.write</span><span class="p">:</span>
<span class="w">            </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
<span class="w">            </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="kt">!lambda</span><span class="w"> </span><span class="s">&#39;return</span><span class="nv"> </span><span class="s">x</span><span class="nv"> </span><span class="s">/</span><span class="nv"> </span><span class="s">100.0;&#39;</span>

<span class="nt">servo</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="w">    </span><span class="c1"># [...] servo config</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my_servo</span>
</pre></div>
</div>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="/api/servo_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/servo.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>