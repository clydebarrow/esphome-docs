
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up BLE devices with PVVX MiThermometer custom firmware as displays.">
<meta itemprop="name" content="PVVX MiThermometer Display">
<meta itemprop="description" content="Instructions for setting up BLE devices with PVVX MiThermometer custom firmware as displays.">
<meta itemprop="image" content="https://esphome.io/components/sensor/images/xiaomi_lywsd03mmc.jpg">
<meta name="twitter:title" content="PVVX MiThermometer Display">
<meta name="twitter:image:src" content="https://esphome.io/components/sensor/images/xiaomi_lywsd03mmc.jpg">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up BLE devices with PVVX MiThermometer custom firmware as displays.">
<meta property="og:title" content="PVVX MiThermometer Display">
<meta property="og:image" content="https://esphome.io/components/sensor/images/xiaomi_lywsd03mmc.jpg">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up BLE devices with PVVX MiThermometer custom firmware as displays.">

    <title>PVVX MiThermometer Display &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../../_static/pygments_dark.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://esphome.io/components/display/pvvx_mithermometer.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="SSD1306 OLED Display" href="ssd1306.html" />
    <link rel="prev" title="PCD 8544 Display (Nokia 5110/3310)" href="pcd8544.html" />
  <link rel="stylesheet" href="../../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="/_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="/_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="/_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="/_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/_static/favicon-16x16.png">
  <link rel="manifest" href="/_static/site.webmanifest">
  <link rel="mask-icon" href="/_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="/_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">PVVX MiThermometer Display</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#rendering-lambda">Rendering Lambda</a><ul>
<li><a class="reference internal" href="#display-states-of-other-sensors">Display states of other sensors</a></li>
<li><a class="reference internal" href="#only-synchronize-the-time-once-a-day">Only synchronize the time once a day</a></li>
</ul>
</li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="../index.html">Components</a> âž”</li>
      <li><a href="index.html">Display Component</a> âž”</li>
      <li>PVVX MiThermometer Display</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="pvvx-mithermometer-display">
<h1>PVVX MiThermometer Display<a class="headerlink" href="#pvvx-mithermometer-display" title="Permalink to this heading">Â¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer</span></code> display platform allows you to use devices running the <a class="reference external" href="https://github.com/pvvx/ATC_MiThermometer">ATC_MiThermometer firmware</a> by pvvx as display drivers with ESPHome.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/xiaomi_lywsd03mmc.jpg"><img alt="../../_images/xiaomi_lywsd03mmc.jpg" src="../../_images/xiaomi_lywsd03mmc.jpg" style="width: 75.0%;" /></a>
<figcaption>
<p><span class="caption-text">Xiaomi LYWSD03MMC.</span><a class="headerlink" href="#id1" title="Permalink to this image">Â¶</a></p>
</figcaption>
</figure>
<p>The data to be displayed is transmitted as external data via BLE.
To do this, a <code class="docutils literal notranslate"><span class="pre">ble_client</span></code> component must be set up.
This component can also synchronize the time of the pvvx device by transmitting a timestamp on each connection.
After the data has been transmitted, the BLE connection is terminated in order to be able to receive the advertising data required for the <code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer</span></code> sensor platform.</p>
<p>The pvvx firmware refreshes the screen periodically (can be set as minimum LCD refresh rate in the firmware configuration).
By default, the internal sensor data and, if available and valid (<code class="docutils literal notranslate"><span class="pre">validity_period</span></code>), the external data are switched every 2.5 s.
Further firmware configuration makes it possible to activate other display modes such as time and battery status.
The firmware configuration can be changed via browser using <a class="reference external" href="https://pvvx.github.io/ATC_MiThermometer/TelinkMiFlasher.html">TelinkMiFlasher.html</a>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">esp32_ble_tracker</span><span class="p">:</span>

<span class="nt">ble_client</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A4:C1:38:B1:CD:7F&quot;</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>

<span class="nt">display</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">  </span><span class="nt">ble_client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>
<span class="w">  </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">    </span><span class="no">it.print_bignum(23.1);</span>
<span class="w">    </span><span class="no">it.print_unit(pvvx_mithermometer::UNIT_DEG_C);</span>
<span class="w">    </span><span class="no">it.print_smallnum(33);</span>
<span class="w">    </span><span class="no">it.print_percent(true);</span>
<span class="w">    </span><span class="no">it.print_happy(true);</span>
<span class="w">    </span><span class="no">it.print_bracket(true);</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">Â¶</a></h2>
<ul class="simple">
<li><p><strong>ble_client_id</strong> (<strong>Required</strong>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): ID of the associated BLE client.</p></li>
<li><p><strong>time_id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): ID of a <a class="reference internal" href="../time/index.html"><span class="doc">Time Component</span></a>. If set, the time will be synchronized with every connection.</p></li>
<li><p><strong>disconnect_delay</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The amount of time the BLE connection is maintained before being disconnected again. Defaults to <code class="docutils literal notranslate"><span class="pre">5s</span></code>.</p></li>
<li><p><strong>update_interval</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The interval to transmit the display data. Defaults to <code class="docutils literal notranslate"><span class="pre">60s</span></code>.</p></li>
<li><p><strong>validity_period</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-time"><span class="std std-ref">Time</span></a>): The time periode for which the pvvx device should display the information. Defaults to <code class="docutils literal notranslate"><span class="pre">5min</span></code>.</p></li>
<li><p><strong>lambda</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/automations.html#config-lambda"><span class="std std-ref">lambda</span></a>): The lambda to use to define the information to be displayed.
See <a class="reference internal" href="#display-pvvx-mithermometer-lambda"><span class="std std-ref">Rendering Lambda</span></a> for more information.</p></li>
<li><p><strong>auto_clear_enabled</strong> (<em>Optional</em>, boolean): Whether to automatically clear the display data before each lambda call,
or to keep the existing display content (must overwrite explicitly, e.g., only on data change). Defaults to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p></li>
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
</ul>
</section>
<section id="rendering-lambda">
<span id="display-pvvx-mithermometer-lambda"></span><h2>Rendering Lambda<a class="headerlink" href="#rendering-lambda" title="Permalink to this heading">Â¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer</span></code> displays can only show two numbers with optional units and a smiley face. Therefore, the API is tailord to these limitations.
In the lambda youâ€™re passed a variable called <code class="docutils literal notranslate"><span class="pre">it</span></code> as with all other displays. In this case however, <code class="docutils literal notranslate"><span class="pre">it</span></code> is a <code class="docutils literal notranslate"><span class="pre">PVVXDisplay</span></code> instance (see API Reference).</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">display</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">    </span><span class="c1"># ...</span>
<span class="w">    </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">      </span><span class="no">// Print -2.1 as big number (first row)</span>
<span class="w">      </span><span class="no">it.print_bignum(-2.1);</span>
<span class="w">      </span><span class="no">// Print Â°C next to the big number</span>
<span class="w">      </span><span class="no">it.print_unit(pvvx_mithermometer::UNIT_DEG_C);</span>
<span class="w">      </span><span class="no">// Print 88 as small number (second row)</span>
<span class="w">      </span><span class="no">it.print_smallnum(88);</span>
<span class="w">      </span><span class="no">// Print % next to the small number</span>
<span class="w">      </span><span class="no">it.print_percent(true);</span>
<span class="w">      </span><span class="no">// Print the low battery symbol</span>
<span class="w">      </span><span class="no">it.print_battery(true);</span>

<span class="w">      </span><span class="no">// Print a happy smiley. Results in &quot; ^_^ &quot;</span>
<span class="w">      </span><span class="no">it.print_happy(true);</span>
<span class="w">      </span><span class="no">// Print a sad smiley. Results in &quot; -âˆ§- &quot;</span>
<span class="w">      </span><span class="no">it.print_sad(true);</span>
<span class="w">      </span><span class="no">// The comination of happy and sad simley results in &quot; Î”â–³Î” &quot;</span>

<span class="w">      </span><span class="no">// Print round brackets around the simley</span>
<span class="w">      </span><span class="no">it.print_bracket(true);</span>
<span class="w">      </span><span class="no">// The final result is &quot;(Î”â–³Î”)&quot;</span>
</pre></div>
</div>
<p>Valid values for the big number (<code class="docutils literal notranslate"><span class="pre">it.print_bignum()</span></code>) are from -99.5 to 1999.5. Smaller values are displayed as <code class="docutils literal notranslate"><span class="pre">Lo</span></code>, larger ones as <code class="docutils literal notranslate"><span class="pre">Hi</span></code>. It will be printed to the screen. If not defined, a 0 will be displayed.</p>
<p>Valid values for the small number (<code class="docutils literal notranslate"><span class="pre">it.print_smallnum()</span></code>) are from -9 to 99. Smaller values are displayed as <code class="docutils literal notranslate"><span class="pre">Lo</span></code>, larger ones as <code class="docutils literal notranslate"><span class="pre">Hi</span></code>. If not defined, a 0 will be displayed.</p>
<p>Possible values for the unit of the big number (<code class="docutils literal notranslate"><span class="pre">it.print_unit()</span></code>) are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_NONE</span></code>: do not show a unit</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_DEG_GHE</span></code>: show <code class="docutils literal notranslate"><span class="pre">Â°Ð“</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_MINUS</span></code>: show <code class="docutils literal notranslate"><span class="pre">-</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_DEG_F</span></code>: show <code class="docutils literal notranslate"><span class="pre">Â°F</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_LOWDASH</span></code>: show <code class="docutils literal notranslate"><span class="pre">_</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_DEG_C</span></code>: show <code class="docutils literal notranslate"><span class="pre">Â°C</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_LINES</span></code>: show <code class="docutils literal notranslate"><span class="pre">=</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pvvx_mithermometer::UNIT_DEG_E</span></code>: show <code class="docutils literal notranslate"><span class="pre">Â°E</span></code></p></li>
</ul>
<p>The appearance of the smiley can be defined by combining the functions <code class="docutils literal notranslate"><span class="pre">it.print_happy()</span></code>, <code class="docutils literal notranslate"><span class="pre">it.print_sad()</span></code> and  <code class="docutils literal notranslate"><span class="pre">it.print_bracket(true)</span></code>:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p><code class="docutils literal notranslate"><span class="pre">print_bracket()</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">print_sad()</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">print_happy()</span></code></p></th>
<th class="head"><p>result</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>false</p></td>
<td><p>false</p></td>
<td><p>false</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>false</p></td>
<td><p>false</p></td>
<td><p>true</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">^_^</span></code></p></td>
</tr>
<tr class="row-even"><td><p>false</p></td>
<td><p>true</p></td>
<td><p>false</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">-âˆ§-</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>false</p></td>
<td><p>true</p></td>
<td><p>true</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">Î”â–³Î”</span></code></p></td>
</tr>
<tr class="row-even"><td><p>true</p></td>
<td><p>false</p></td>
<td><p>false</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(</span>&#160;&#160; <span class="pre">)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>true</p></td>
<td><p>false</p></td>
<td><p>true</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(^_^)</span></code></p></td>
</tr>
<tr class="row-even"><td><p>true</p></td>
<td><p>true</p></td>
<td><p>false</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(-âˆ§-)</span></code></p></td>
</tr>
<tr class="row-odd"><td><p>true</p></td>
<td><p>true</p></td>
<td><p>true</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">(Î”â–³Î”)</span></code></p></td>
</tr>
</tbody>
</table>
<section id="display-states-of-other-sensors">
<h3>Display states of other sensors<a class="headerlink" href="#display-states-of-other-sensors" title="Permalink to this heading">Â¶</a></h3>
<p>The following example display the sensor states of a MiFlora sensor on a pvvx display. The time is also synchronized.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">time</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant_time</span>

<span class="nt">esp32_ble_tracker</span><span class="p">:</span>

<span class="nt">ble_client</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A4:C1:38:B1:CD:7F&quot;</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>

<span class="nt">sensor</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">  </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A4:C1:38:B1:CD:7F&quot;</span>
<span class="w">  </span><span class="nt">temperature</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Temperature&quot;</span>
<span class="w">  </span><span class="nt">humidity</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Humidity&quot;</span>
<span class="w">  </span><span class="nt">battery_level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Battery-Level&quot;</span>
<span class="w">  </span><span class="nt">battery_voltage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Battery-Voltage&quot;</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xiaomi_hhccjcy01</span>
<span class="w">  </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&#39;94:2B:FF:5C:91:61&#39;</span>
<span class="w">  </span><span class="nt">temperature</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xiaomi</span><span class="nv"> </span><span class="s">HHCCJCY01</span><span class="nv"> </span><span class="s">Temperature&quot;</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">miflora_temperature</span>
<span class="w">  </span><span class="nt">moisture</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xiaomi</span><span class="nv"> </span><span class="s">HHCCJCY01</span><span class="nv"> </span><span class="s">Moisture&quot;</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">miflora_moisture</span>
<span class="w">  </span><span class="nt">illuminance</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xiaomi</span><span class="nv"> </span><span class="s">HHCCJCY01</span><span class="nv"> </span><span class="s">Illuminance&quot;</span>
<span class="w">  </span><span class="nt">conductivity</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Xiaomi</span><span class="nv"> </span><span class="s">HHCCJCY01</span><span class="nv"> </span><span class="s">Soil</span><span class="nv"> </span><span class="s">Conductivity&quot;</span>

<span class="nt">display</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">  </span><span class="nt">ble_client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>
<span class="w">  </span><span class="nt">update_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10min</span>
<span class="w">  </span><span class="nt">validity_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">15min</span>
<span class="w">  </span><span class="nt">time_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant_time</span>
<span class="w">  </span><span class="nt">lambda</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">|-</span>
<span class="w">    </span><span class="no">double temp = id(miflora_temperature).state;</span>
<span class="w">    </span><span class="no">double moisture = id(miflora_moisture).state;</span>
<span class="w">    </span><span class="no">it.print_bignum(temp);</span>
<span class="w">    </span><span class="no">it.print_unit(pvvx_mithermometer::UNIT_DEG_C);</span>
<span class="w">    </span><span class="no">it.print_smallnum(moisture);</span>
<span class="w">    </span><span class="no">it.print_percent();</span>
<span class="w">    </span><span class="no">if (temp &lt; 5 || temp &gt; 30 || moisture &lt; 10 || moisture &gt; 50) {</span>
<span class="w">      </span><span class="no">it.print_sad();</span>
<span class="w">    </span><span class="no">} else {</span>
<span class="w">      </span><span class="no">it.print_happy();</span>
<span class="w">    </span><span class="no">}</span>
</pre></div>
</div>
</section>
<section id="only-synchronize-the-time-once-a-day">
<h3>Only synchronize the time once a day<a class="headerlink" href="#only-synchronize-the-time-once-a-day" title="Permalink to this heading">Â¶</a></h3>
<p>The following example will synchronized the time of the pvvx device once a day.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">time</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant</span>
<span class="w">    </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant_time</span>

<span class="nt">esp32_ble_tracker</span><span class="p">:</span>

<span class="nt">ble_client</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A4:C1:38:B1:CD:7F&quot;</span>
<span class="w">  </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>

<span class="nt">sensor</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">  </span><span class="nt">mac_address</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;A4:C1:38:B1:CD:7F&quot;</span>
<span class="w">  </span><span class="nt">temperature</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Temperature&quot;</span>
<span class="w">  </span><span class="nt">humidity</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Humidity&quot;</span>
<span class="w">  </span><span class="nt">battery_level</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Battery-Level&quot;</span>
<span class="w">  </span><span class="nt">battery_voltage</span><span class="p">:</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;PVVX</span><span class="nv"> </span><span class="s">Battery-Voltage&quot;</span>

<span class="nt">display</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_mithermometer</span>
<span class="w">  </span><span class="nt">ble_client_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">pvvx_ble_display</span>
<span class="w">  </span><span class="nt">update_interval</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">24h</span>
<span class="w">  </span><span class="nt">validity_period</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0s</span>
<span class="w">  </span><span class="nt">time_id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">homeassistant_time</span>
</pre></div>
</div>
</section>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">Â¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Display Component</span></a></p></li>
<li><p><a class="reference internal" href="../ble_client.html"><span class="doc">BLE Client</span></a></p></li>
<li><p><a class="reference internal" href="../sensor/xiaomi_ble.html"><span class="doc">Xiaomi Mijia BLE Sensors</span></a></p></li>
<li><p><a class="reference external" href="/api/pvvx__display_8h.html">API Reference</a></p></li>
<li><p><a class="reference external" href="https://github.com/pvvx/ATC_MiThermometer">ATC_MiThermometer firmware</a> by <a class="reference external" href="https://github.com/pvvx">pvvx</a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/display/pvvx_mithermometer.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 ðŸŽ‰
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="/changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("/changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>