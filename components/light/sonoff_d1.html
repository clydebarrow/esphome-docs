
  <!DOCTYPE html>


<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />
<meta name="description" content="Instructions for setting up a Sonoff D1 dimmer switch.">
<meta itemprop="name" content="Sonoff D1 Dimmer">
<meta itemprop="description" content="Instructions for setting up a Sonoff D1 dimmer switch.">
<meta itemprop="image" content="https://clydebarrow.github.io/esphome-docs/_images/brightness-medium.png">
<meta name="twitter:title" content="Sonoff D1 Dimmer">
<meta name="twitter:image:src" content="https://clydebarrow.github.io/esphome-docs/_images/brightness-medium.png">
<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@OttoWinter_">
<meta name="twitter:description" content="Instructions for setting up a Sonoff D1 dimmer switch.">
<meta property="og:title" content="Sonoff D1 Dimmer">
<meta property="og:image" content="https://clydebarrow.github.io/esphome-docs/_images/brightness-medium.png">
<meta property="og:type" content="website">
<meta property="og:description" content="Instructions for setting up a Sonoff D1 dimmer switch.">

    <title>Sonoff D1 Dimmer &#8212; ESPHome</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <link id="pygments_dark_css" media="(prefers-color-scheme: dark)" rel="stylesheet" type="text/css" href="../../_static/pygments_dark.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://clydebarrow.github.io/esphome-docs/components/light/sonoff_d1.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Status LED Light" href="status_led.html" />
    <link rel="prev" title="Shelly Dimmer" href="shelly_dimmer.html" />
  <link rel="stylesheet" href="../../_static/custom.css?hash=ab494674" type="text/css" />
  <link rel="apple-touch-icon" sizes="180x180" href="_static/apple-touch-icon.png">
  <link rel="shortcut icon" href="_static/favicon.ico">
  <link rel="icon" type="image/png" sizes="512x512" href="_static/favicon-512x512.png">
  <link rel="icon" type="image/png" sizes="256x256" href="_static/favicon-256x256.png">
  <link rel="icon" type="image/png" sizes="192x192" href="_static/favicon-192x192.png">
  <link rel="icon" type="image/png" sizes="128x128" href="_static/favicon-128x128.png">
  <link rel="icon" type="image/png" sizes="32x32" href="_static/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="_static/favicon-16x16.png">
  <link rel="manifest" href="_static/site.webmanifest">
  <link rel="mask-icon" href="_static/safari-pinned-tab.svg" color="#646464">
  <meta name="apple-mobile-web-app-title" content="ESPHome">
  <meta name="application-name" content="ESPHome">
  <meta name="msapplication-TileColor" content="#dfdfdf">
  <meta name="msapplication-config" content="_static/browserconfig.xml">
  <meta name="theme-color" content="#dfdfdf">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta property="og:site_name" content="ESPHome">
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo-text.svg" alt="Logo"/>
            </a></p><link href="pagefind/pagefind-ui.css" rel="stylesheet">
<script src="pagefind/pagefind-ui.js"></script>

<div id="search"></div>
<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>

  <div>
    <h3><a href="../../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Sonoff D1 Dimmer</a><ul>
<li><a class="reference internal" href="#configuration-variables">Configuration variables:</a></li>
<li><a class="reference internal" href="#see-also">See Also</a></li>
</ul>
</li>
</ul>

  </div><hr />
<ul>
    <li><a href="https://discord.gg/KhAMKrd" target="_blank">Join the community</a></li>
    <li><a href="https://twitter.com/esphome_" target="_blank">Follow us on Twitter</a></li>
    <li><a href="https://github.com/esphome/esphome" target="_blank">Source Code</a></li>
    <li><a href="mailto:esphome@nabucasa.com">Contact</a> (no support!)</li>
</ul>
ESPHome is an open source project by <a href="https://www.nabucasa.com" target="_blank">Nabu Casa</a>
<ul>
    <li><a href="https://www.netlify.com" target="_blank">This site is powered by Netlify</a></li>
</ul>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
  
  <ul class="breadcrumbs">
      <li><a href="../index.html">Components</a> ➔</li>
      <li><a href="index.html">Light Component</a> ➔</li>
      <li>Sonoff D1 Dimmer</li>
  </ul>
  


          <div class="body" role="main">
            
  <section id="sonoff-d1-dimmer">
<h1>Sonoff D1 Dimmer<a class="headerlink" href="#sonoff-d1-dimmer" title="Permalink to this heading">¶</a></h1>
<p>The <code class="docutils literal notranslate"><span class="pre">sonoff_d1</span></code> light platform creates a simple brightness-only light for the
hardware found in <a class="reference external" href="https://itead.cc/product/sonoff-d1-smart-dimmer-switch/">Sonoff D1 dimmer</a>. Installations with Sonoff RM433 433MHz radio
remotes are also supported. Use this component to integrate Sonoff D1 dimmer into
ESPHome / Home Assistant ecosystem.</p>
<figure class="align-center" id="id1">
<a class="reference internal image-reference" href="../../_images/sonoff_d11.jpg"><img alt="../../_images/sonoff_d11.jpg" src="../../_images/sonoff_d11.jpg" style="width: 100.0%;" /></a>
<figcaption>
<p><span class="caption-text">Sonoff D1 dimmer front and back view. Image by <a class="reference external" href="https://itead.cc/product/sonoff-d1-smart-dimmer-switch/">ITEAD</a>.</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Sonoff D1 uses another MCU for light dimming and handling of radio commands.
It’s hooked up to ESP8266 via UART bus with default RX / TX pins being used on
ESP8266 side. Bi-directional symmetric request / response protocol is implemented
between ESP8266 and MCU. <code class="docutils literal notranslate"><span class="pre">sonoff_d1</span></code> component implements this protocol and
translates between HA light commands and serial messages.</p>
<p>For detailed instructions on how to replace the stock firmware with ESPHome see <a class="reference internal" href="../../devices/sonoff_s20.html"><span class="doc">Using With Sonoff S20</span></a>.
You will need to locate GPIO0 pin and serial port. Photos below should help.</p>
<figure class="align-center" id="id2">
<a class="reference internal image-reference" href="../../_images/sonoff_d1_gpio0.jpg"><img alt="../../_images/sonoff_d1_gpio0.jpg" src="../../_images/sonoff_d1_gpio0.jpg" style="width: 100.0%;" /></a>
<figcaption>
<p><span class="caption-text">Photo of GPIO 0, images by <a class="reference external" href="https://github.com/arendst/Tasmota/issues/7598#issuecomment-578433417">klotzma</a>.</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/sonoff_d1_serial.jpg"><img alt="../../_images/sonoff_d1_serial.jpg" src="../../_images/sonoff_d1_serial.jpg" style="width: 100.0%;" /></a>
<figcaption>
<p><span class="caption-text">Photo of serial port pins, images by  <a class="reference external" href="https://github.com/arendst/Tasmota/issues/7598#issuecomment-578433417">klotzma</a>.</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Before using this components make sure:</p>
<ul class="simple">
<li><p>board is configured to <code class="docutils literal notranslate"><span class="pre">esp8285</span></code></p></li>
<li><p><a class="reference internal" href="../uart.html#uart"><span class="std std-ref">UART bus</span></a> is configured with default RX / TX pins and 9600 baud rate</p></li>
<li><p><a class="reference internal" href="../logger.html"><span class="doc">logger</span></a> to the serial port is disabled by setting <code class="docutils literal notranslate"><span class="pre">baud_rate</span></code> to <code class="docutils literal notranslate"><span class="pre">0</span></code></p></li>
<li><p>in case you need light state restoration on power up, make sure <code class="docutils literal notranslate"><span class="pre">restore_from_flash</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code> in the <a class="reference internal" href="../esp8266.html"><span class="doc">ESP8266 platform</span></a></p></li>
</ul>
<p>This component is useless for devices other than Sonoff D1 dimmer.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># Example configuration entry</span>
<span class="nt">esphome</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">my-d1-dimmer</span>

<span class="c1"># Restore from flash if you want to keep the last state at power up</span>
<span class="nt">esp8266</span><span class="p">:</span>
<span class="w">  </span><span class="nt">board</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">esp8285</span>
<span class="w">  </span><span class="nt">restore_from_flash</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="c1"># Make sure your WiFi will connect</span>
<span class="nt">wifi</span><span class="p">:</span>
<span class="w">  </span><span class="nt">ssid</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ssid&quot;</span>
<span class="w">  </span><span class="nt">password</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;password&quot;</span>

<span class="c1"># Make sure logging is not using the serial port</span>
<span class="nt">logger</span><span class="p">:</span>
<span class="w">  </span><span class="nt">baud_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>

<span class="c1"># Enable Home Assistant API</span>
<span class="nt">api</span><span class="p">:</span>

<span class="c1"># Make sure you can upload new firmware OTA</span>
<span class="nt">ota</span><span class="p">:</span>

<span class="c1"># D1 dimmer uses hardware serial port on the default pins @ 9600 bps</span>
<span class="nt">uart</span><span class="p">:</span>
<span class="w">  </span><span class="nt">rx_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RX</span>
<span class="w">  </span><span class="nt">tx_pin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">TX</span>
<span class="w">  </span><span class="nt">baud_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">9600</span>

<span class="c1"># And finally the light component</span>
<span class="c1"># gamma correction equal to zero gives linear scale,</span>
<span class="c1"># exactly what&#39;s needed for this device</span>
<span class="nt">light</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">platform</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">sonoff_d1</span>
<span class="w">    </span><span class="nt">use_rm433_remote</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">    </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Sonoff D1 Dimmer</span>
<span class="w">    </span><span class="nt">restore_mode</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">RESTORE_DEFAULT_OFF</span>
<span class="w">    </span><span class="nt">gamma_correct</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.0</span>
<span class="w">    </span><span class="nt">default_transition_length</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1s</span>
</pre></div>
</div>
<section id="configuration-variables">
<h2>Configuration variables:<a class="headerlink" href="#configuration-variables" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><strong>id</strong> (<em>Optional</em>, <a class="reference internal" href="../../guides/configuration-types.html#config-id"><span class="std std-ref">ID</span></a>): Manually specify the ID used for code generation.</p></li>
<li><p><strong>name</strong> (<strong>Required</strong>, string): The name of the light.</p></li>
<li><p><strong>use_rm433_remote</strong> (<em>Optional</em>, boolean): Set to <code class="docutils literal notranslate"><span class="pre">True</span></code> if your setup uses Sonoff RM433
or any other radio remote control. Properly setting this parameter allows the platform to
identify what to do with incoming UART commands. RF chip is known to catch random commands
if not paired with a real remote (so called ghost commands). This problem is observed even
with the stock firmware and most probably is a bug in the MCU firmware or in the RF chip
firmware. Setting this to <code class="docutils literal notranslate"><span class="pre">False</span></code> instructs the platform to properly ignore such commands
and thus prevent unexpected switches or light intensity changes.</p></li>
<li><p><strong>min_value</strong> (<em>Optional</em>, int): The lowest dimmer value allowed. Acceptable value for your
setup will depend on actual light bulbs installed and number of them. Start with the default
value and check what will be the minimal brightness bulbs can render. Pay attention that for
some dimmable LED lamps minimal turn-on brightness will be higher that the minimal achievable
brightness if you just decrease it when lamp is already turned on. Defaults to 0.</p></li>
<li><p><strong>max_value</strong> (<em>Optional</em>, int): The highest dimmer value allowed. Use this to hard-limit light
intensity for your setup. For some bulbs this parameter might be also useful to prevent
flickering at high brightness values. Defaults to 100.</p></li>
<li><p>All other options from <a class="reference internal" href="index.html#config-light"><span class="std std-ref">Light</span></a>.</p></li>
</ul>
</section>
<section id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="index.html"><span class="doc">Light Component</span></a></p></li>
<li><p><a class="reference internal" href="../uart.html"><span class="doc">UART Bus</span></a></p></li>
<li><p><a class="reference internal" href="../logger.html"><span class="doc">Logger Component</span></a></p></li>
<li><p><a class="reference internal" href="../esp8266.html"><span class="doc">ESP8266 Platform</span></a></p></li>
<li><p><a class="reference external" href="https://github.com/esphome/esphome-docs/blob/current/components/light/sonoff_d1.rst">Edit this page on GitHub</a></p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
  <div id="upgrade-footer">
    A new version has been release since you last visited this page: 2023.8.3 🎉
    <div class="footer-button-container">
      <div role="button" id="upgrade-footer-dismiss" class="footer-button">Dismiss</div>
      <a id="upgrade-footer-changelog" class="footer-button" href="changelog/2023.8.0.html">View Changelog</a>
    </div>
  </div>
  <script>
    var old = window.localStorage.getItem("version");
    if (old === null || window.location.pathname.lastIndexOf("changelog/", 0) === 0) { window.localStorage.setItem("version", "2023.8");
    } else if (old !== "2023.8") {
      const footerEl = document.getElementById("upgrade-footer");
      footerEl.classList.add("not-hidden");
      footerEl.addEventListener('click', function () {
        window.localStorage.setItem("version", "2023.8");
        footerEl.classList.remove("not-hidden");
      });
    }
  </script>

  </body>
</html>